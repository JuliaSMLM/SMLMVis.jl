<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MP4 Generation · SMLMVis.jl</title><meta name="title" content="MP4 Generation · SMLMVis.jl"/><meta property="og:title" content="MP4 Generation · SMLMVis.jl"/><meta property="twitter:title" content="MP4 Generation · SMLMVis.jl"/><meta name="description" content="Documentation for SMLMVis.jl."/><meta property="og:description" content="Documentation for SMLMVis.jl."/><meta property="twitter:description" content="Documentation for SMLMVis.jl."/><meta property="og:url" content="https://JuliaSMLM.github.io/SMLMVis.jl/mic/"/><meta property="twitter:url" content="https://JuliaSMLM.github.io/SMLMVis.jl/mic/"/><link rel="canonical" href="https://JuliaSMLM.github.io/SMLMVis.jl/mic/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SMLMVis.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../blob_rendering/">Blob Rendering</a></li><li class="is-active"><a class="tocitem" href>MP4 Generation</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Basic-Usage"><span>Basic Usage</span></a></li><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>MP4 Generation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>MP4 Generation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSMLM/SMLMVis.jl/blob/main/docs/src/mic.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="SMLMVis.MIC"><a class="docs-heading-anchor" href="#SMLMVis.MIC">SMLMVis.MIC</a><a id="SMLMVis.MIC-1"></a><a class="docs-heading-anchor-permalink" href="#SMLMVis.MIC" title="Permalink"></a></h1><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SMLMVis.MIC" href="#SMLMVis.MIC"><code>SMLMVis.MIC</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Tools and utilities for the visualization of data collected via the      <a href="https://github.com/LidkeLab/matlab-instrument-control">MATLAB Instrument Control Toolbox</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSMLM/SMLMVis.jl/blob/c199a6ca3c194b9760b048d092b9ea561271840f/src/mic/MIC.jl#L1-L4">source</a></section></article><h2 id="Basic-Usage"><a class="docs-heading-anchor" href="#Basic-Usage">Basic Usage</a><a id="Basic-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Usage" title="Permalink"></a></h2><h3 id="Process-one-file-using-several-keyword-options"><a class="docs-heading-anchor" href="#Process-one-file-using-several-keyword-options">Process one file using several keyword options</a><a id="Process-one-file-using-several-keyword-options-1"></a><a class="docs-heading-anchor-permalink" href="#Process-one-file-using-several-keyword-options" title="Permalink"></a></h3><pre><code class="language-julia hljs">using SMLMVis

dirname = &quot;C:/Data&quot;
filename = &quot;CellMovie&quot;
fn = joinpath(dirname, filename * &quot;.h5&quot;)

mic2mp4(fn; fps = 20, percentilerange = 0.99, zoom = 4, frame_range = 1:100)
</code></pre><h3 id="Process-a-directory"><a class="docs-heading-anchor" href="#Process-a-directory">Process a directory</a><a id="Process-a-directory-1"></a><a class="docs-heading-anchor-permalink" href="#Process-a-directory" title="Permalink"></a></h3><pre><code class="language-julia hljs">using SMLMVis

dirname = &quot;C:/Data&quot;

# A little julia ...
files = filter(f -&gt; endswith(f, &quot;.h5&quot;), readdir(dirname))
fullpathfiles = dirname .* &quot;/&quot; .* files

# Use broadcasting over the file names
mic2mp4.(fullpathfiles; fps = 20, percentilerange = 0.99)</code></pre><h3 id="The-first-50-frames-in-all-datasets"><a class="docs-heading-anchor" href="#The-first-50-frames-in-all-datasets">The first 50 frames in all datasets</a><a id="The-first-50-frames-in-all-datasets-1"></a><a class="docs-heading-anchor-permalink" href="#The-first-50-frames-in-all-datasets" title="Permalink"></a></h3><pre><code class="language-julia hljs">using SMLMVis

dirname = &quot;C:/Data&quot;
savedir = &quot;C:/Data/Results&quot;
filename = &quot;CellMovie&quot;
fn = joinpath(dirname, filename * &quot;.h5&quot;)

# Use comprehension over datasets and put results a different folder
n = SMLMVis.MIC.count_datasets(fn)
[mic2mp4(fn; savedir=savedir, fps=20, percentilerange=0.99, datasetnum=i, frame_range=1:50) for i in 1:n];</code></pre><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><ul><li><a href="#SMLMVis.MIC.count_datasets-Tuple{AbstractString}"><code>SMLMVis.MIC.count_datasets</code></a></li><li><a href="#SMLMVis.MIC.isMIC-Tuple{AbstractString}"><code>SMLMVis.MIC.isMIC</code></a></li><li><a href="#SMLMVis.MIC.isTIRF-Tuple{AbstractString}"><code>SMLMVis.MIC.isTIRF</code></a></li><li><a href="#SMLMVis.MIC.mic2mp4-Tuple{AbstractString}"><code>SMLMVis.MIC.mic2mp4</code></a></li><li><a href="#SMLMVis.MIC.normalize!-Tuple{AbstractArray{&lt;:Real}}"><code>SMLMVis.MIC.normalize!</code></a></li><li><a href="#SMLMVis.MIC.readMIC-Tuple{AbstractString}"><code>SMLMVis.MIC.readMIC</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SMLMVis.MIC.count_datasets-Tuple{AbstractString}" href="#SMLMVis.MIC.count_datasets-Tuple{AbstractString}"><code>SMLMVis.MIC.count_datasets</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">count_datasets(filename::AbstractString; groupname::AbstractString=&quot;Channel01/Zposition001&quot;)</code></pre><p>Count the number of datasets in an HDF5 file.</p><p><strong>Arguments</strong></p><ul><li><code>filename::AbstractString</code>: The name of the HDF5 file to count datasets in.</li><li><code>groupname::AbstractString</code>: The name of the group to count datasets in. Default is &quot;Channel01/Zposition001&quot;.</li></ul><p><strong>Returns</strong></p><ul><li><code>n_datasets::Int</code>: The number of datasets in the specified group.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSMLM/SMLMVis.jl/blob/c199a6ca3c194b9760b048d092b9ea561271840f/src/mic/h5tools.jl#L64-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SMLMVis.MIC.isMIC-Tuple{AbstractString}" href="#SMLMVis.MIC.isMIC-Tuple{AbstractString}"><code>SMLMVis.MIC.isMIC</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isMIC(filename::AbstractString)</code></pre><p>Check if an HDF5 file has the expected group structure for a MIC file.</p><p><strong>Arguments</strong></p><ul><li><code>filename::AbstractString</code>: The name of the HDF5 file to check.</li></ul><p><strong>Returns</strong></p><ul><li><code>out::Bool</code>: <code>true</code> if the file has the expected group structure, <code>false</code> otherwise.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSMLM/SMLMVis.jl/blob/c199a6ca3c194b9760b048d092b9ea561271840f/src/mic/h5tools.jl#L2-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SMLMVis.MIC.isTIRF-Tuple{AbstractString}" href="#SMLMVis.MIC.isTIRF-Tuple{AbstractString}"><code>SMLMVis.MIC.isTIRF</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isTIRF(filename::AbstractString)</code></pre><p>Check if the given HDF5 file contains TIRF (Total Internal Reflection Fluorescence) data.</p><p><strong>Arguments</strong></p><ul><li><code>filename::AbstractString</code>: The path to the HDF5 file to check.</li></ul><p><strong>Returns</strong></p><ul><li><code>Bool</code>: Returns <code>true</code> if the file contains TIRF data, <code>false</code> otherwise.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSMLM/SMLMVis.jl/blob/c199a6ca3c194b9760b048d092b9ea561271840f/src/mic/h5tools.jl#L28-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SMLMVis.MIC.mic2mp4-Tuple{AbstractString}" href="#SMLMVis.MIC.mic2mp4-Tuple{AbstractString}"><code>SMLMVis.MIC.mic2mp4</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mic2mp4(filename::AbstractString;
    savefilename::Union{Nothing,AbstractString}=nothing,
    groupname::AbstractString=&quot;Channel01/Zposition001&quot;,
    datasetnum::Int=1,
    framenormalize::Bool=false,
    fps::Int=30,
    crf::Int=23,
    percentilerange::Union{Real,Nothing}=nothing,
    zoom::Int=1,
    frame_range::Union{AbstractRange, Nothing}=nothing)</code></pre><p>Convert a MIC HDF5 file to an MP4 video.</p><p>This function converts a MIC HDF5 file to an MP4 video using the specified group, dataset number,      frames per second, and constant rate factor. The output video is saved to the specified output file,      or named after the input file if no output file is specified. If <code>framenormalize</code> is <code>true</code>,      each frame of the dataset is normalized individually. The function returns <code>nothing</code>.</p><p><strong>Arguments</strong></p><ul><li><code>filename::AbstractString</code>: The name of the HDF5 file to convert.</li><li><code>savefilename::Union{Nothing,AbstractString}</code>: The name of the output MP4 file. If <code>nothing</code>, the output file is named after the input file. Default is <code>nothing</code>.</li><li><code>savedir::Union{Nothing,AbstractString}</code>: The output directory. If <code>nothing</code> path is the same as the input file. Default is <code>nothing</code>.</li><li><code>groupname::AbstractString</code>: The name of the group to convert. Default is &quot;Channel01/Zposition001&quot;.</li><li><code>datasetnum::Int</code>: The number of the dataset to convert. Default is 1.</li><li><code>framenormalize::Bool</code>: Whether to normalize each frame of the dataset individually. Default is <code>false</code>.</li><li><code>fps::Int</code>: The frames per second of the output video. Default is 30.</li><li><code>crf::Int</code>: The constant rate factor of the output video. Default is 10.</li><li><code>percentilerange::Union{Real,Nothing}=nothing</code>: The percentile range to use for normalization. If <code>nothing</code>, the full range of <code>arr</code> is used.</li><li><code>zoom::Int</code>: The zoom factor to apply to each frame. Default is 1.</li><li><code>frame_range::Union{AbstractRange, Nothing}=nothing</code>: The range of frames to use for the video. If <code>nothing</code>, all frames are used.</li></ul><p><strong>Returns</strong></p><ul><li><code>nothing</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSMLM/SMLMVis.jl/blob/c199a6ca3c194b9760b048d092b9ea561271840f/src/mic/h5tools.jl#L158-L192">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SMLMVis.MIC.normalize!-Tuple{AbstractArray{&lt;:Real}}" href="#SMLMVis.MIC.normalize!-Tuple{AbstractArray{&lt;:Real}}"><code>SMLMVis.MIC.normalize!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">normalize!(arr::AbstractArray{&lt;:Real}; minval::Union{Real,Nothing}=nothing, maxval::Union{Real,Nothing}=nothing, percentilerange::Union{Real,Nothing}=nothing)</code></pre><p>Normalize the input array <code>arr</code> in place. The normalization is done based on the minimum and maximum values of the array, or based on a percentile range if <code>percentilerange</code> is provided.</p><p><strong>Arguments</strong></p><ul><li><code>arr::AbstractArray{&lt;:Real}</code>: The array to be normalized.</li><li><code>minval::Union{Real,Nothing}=nothing</code>: The minimum value to use for normalization. If <code>nothing</code>, the minimum value of <code>arr</code> is used.</li><li><code>maxval::Union{Real,Nothing}=nothing</code>: The maximum value to use for normalization. If <code>nothing</code>, the maximum value of <code>arr</code> is used.</li><li><code>percentilerange::Union{Real,Nothing}=nothing</code>: The percentile range to use for normalization. If <code>nothing</code>, the full range of <code>arr</code> is used.</li></ul><p><strong>Returns</strong></p><ul><li><code>nothing</code>: The function modifies <code>arr</code> in place and does not return anything.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSMLM/SMLMVis.jl/blob/c199a6ca3c194b9760b048d092b9ea561271840f/src/mic/h5tools.jl#L252-L265">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SMLMVis.MIC.readMIC-Tuple{AbstractString}" href="#SMLMVis.MIC.readMIC-Tuple{AbstractString}"><code>SMLMVis.MIC.readMIC</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">readMIC(filename::AbstractString;
    groupname::AbstractString=&quot;Channel01/Zposition001&quot;,
    datasetnum::Int=1)</code></pre><p>Read data from a MIC HDF5 file.</p><p><strong>Arguments</strong></p><ul><li><code>filename::AbstractString</code>: The name of the HDF5 file to read data from.</li><li><code>groupname::AbstractString</code>: The name of the group to read data from. Default is &quot;Channel01/Zposition001&quot;.</li><li><code>datasetnum::Int</code>: The number of the dataset to read. Default is 1.</li></ul><p><strong>Returns</strong></p><ul><li><code>data::Array</code>: The data read from the specified dataset.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSMLM/SMLMVis.jl/blob/c199a6ca3c194b9760b048d092b9ea561271840f/src/mic/h5tools.jl#L110-L124">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../blob_rendering/">« Blob Rendering</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Monday 17 June 2024 22:27">Monday 17 June 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
